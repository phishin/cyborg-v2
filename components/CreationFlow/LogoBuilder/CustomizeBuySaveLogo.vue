<script setup>import { ref, computed} from "vue";import ImageElement from "../../ImageElement.vue";import { useLogoStore } from '~/stores/logoStores';const logoStore = useLogoStore();import { useStripeCheckoutStore } from '~/stores/stripeCheckoutStore';import SaveLogoModal from "~/components/CreationFlow/SaveLogoModal.vue";const stripeCheckout = useStripeCheckoutStore();// Bind global values directly from the store using computed propertiesconst selectedColorStyles = computed({  get: () => logoStore.selectedColorStyles,});// value of selected logo id to pass through to parent componentconst selectedLogoID = computed({  get: () => logoStore.selectedLogoID,  set: (logoValue) => { logoStore.selectedLogoID = logoValue; }});// sample logos to editconst sampleLogos = [  {    logo: "/assets/img/sample-logos/select-logo-1.png",    watermark: "/assets/img/cyborg-logo-watermark.png",    logoID: "logoV1"  },  {    logo: "/assets/img/sample-logos/select-logo-2.png",    watermark: "/assets/img/cyborg-logo-watermark.png",    logoID: "logoV2"  },  {    logo: "/assets/img/sample-logos/select-logo-3.png",    watermark: "/assets/img/cyborg-logo-watermark.png",    logoID: "logoV3"  },  {    logo: "/assets/img/sample-logos/select-logo-1.png",    watermark: "/assets/img/cyborg-logo-watermark.png",    logoID: "logoV4"  },  {    logo: "/assets/img/sample-logos/select-logo-2.png",    watermark: "/assets/img/cyborg-logo-watermark.png",    logoID: "logoV5"  },  {    logo: "/assets/img/sample-logos/select-logo-3.png",    watermark: "/assets/img/cyborg-logo-watermark.png",    logoID: "logoV6"  },];// Handle logo click to show edit buttonsconst handleLogoClick = (logoID) => {  selectedLogoID.value = logoID;  console.log("Selected logo ID:", selectedLogoID.value);};// Stripe checkout & Buy functionfunction handleBuy() {  stripeCheckout.checkout()}// Save current logo state into Firestore via Pinia actionasync function handleSaveLogo() {  try {    const id = await logoStore.saveLogo();    console.log('Saved logo with id', id);  } catch (err) {    console.error('Failed to save logo', err);  }}</script><template>  <div class="edit-logo-screen w-full relative">    <div class="intro-text w-full relative pt-[36px] lg:pt-[80px] block mb-[30px] md:mb-[35px] lg:mb-[40px]">      <strong class="relative block w-full text-[#22C55E] font-black text-base leading-[1] pb-[12px] tracking-[3px] uppercase">CUSTOMIZE, BUY OR SAVE</strong>      <h1 class="block w-full relative text-black text-[20px] lg:text-[32px] leading-[1] font-bold pb-[12px] lg:pb-[18px]">Adjust fonts, colors, and more to perfect your design</h1>      <p class="block relative w-full text-black text-[18px] lg:text-[24px] leading-[1]">Ready to Commit? Edit to finalize, save for later, or purchase now to start using your new logo.</p>    </div>    <div class="top-color-palette w-full relative grid grid-cols-1 gap-[20px]" :data-color="selectedColorStyles">      <div class="color-palette-item w-full relative flex flex-row flex-wrap gap-[15px] lg:gap-[26px]"          v-if="selectedColorStyles.includes('Red')">        <div class="h-[69px] w-[69px] max-w-[69px]  block relative" style="background: linear-gradient(113.16deg, #FD0404 0.81%, #370202 100%);"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-[#FD0404]"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-[#700303] " ></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-[#D8D8D8]"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-black"></div>      </div>      <div class="color-palette-item w-full relative flex flex-row flex-wrap gap-[15px] lg:gap-[26px]"           v-if="selectedColorStyles.includes('Orange')">        <div class="h-[69px] w-[69px] max-w-[69px] block relative" style="background: linear-gradient(113.16deg, #FFA305 0.81%, #934200 95.04%);"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-orange-700"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-orange-500" ></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-[#D8D8D8]"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-black"></div>      </div>      <div class="color-palette-item w-full relative flex flex-row flex-wrap gap-[15px] lg:gap-[26px]"           v-if="selectedColorStyles.includes('Yellow')">        <div class="h-[69px] w-[69px] max-w-[69px] block relative" style="background: linear-gradient(113.16deg, #FFE100 0.81%, #B17900 100%);"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-yellow-700"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-yellow-500" ></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-[#D8D8D8]"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-black"></div>      </div>      <div class="color-palette-item w-full relative flex flex-row flex-wrap gap-[15px] lg:gap-[26px]"           v-if="selectedColorStyles.includes('Blue')">        <div class="h-[69px] w-[69px] max-w-[69px] block relative" style="background: linear-gradient(112.94deg, #0099FF 0%, #02243C 100.85%);"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-blue-700"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-blue-400" ></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-[#D8D8D8]"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-black"></div>      </div>      <div class="color-palette-item w-full relative flex flex-row flex-wrap gap-[15px] lg:gap-[26px]"           v-if="selectedColorStyles.includes('Purple')">        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-purple-700"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-purple-500" ></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-[#D8D8D8]"></div>        <div class="h-[69px] w-[69px] max-w-[69px] block relative bg-black"></div>      </div>    </div>    <div class="logos-to-select w-full relative mt-[40px] gap-[20px] grid grid-cols-1 md:grid-cols-2">      <div          v-for="(generatedLogoImage, index) in sampleLogos"          :key="index"          :data-logo="generatedLogoImage.logoID"          :class="[          'logo-item font-primary w-full h-full min-w-auto max-w-[340px] sm:min-w-full sm:max-w-[50%] lg:w-full lg:h-full lg:max-h-[initial] lg:max-w-full lg:min-w-[320px] xl:min-w-[350px] relative transition-all duration-200 block aspect-[569/301] cursor-pointer',          sampleLogos[index].logoID === selectedLogoID ? 'logo-selected' : ''        ]"          @click="handleLogoClick(sampleLogos[index].logoID)">        <div class="logo-item-wrapper w-full h-full flex flex-col justify-center items-center py-[58px] px-[30px] md:px-[45px]  transition-all duration-200 border-[6px] bg-white overflow-hidden relative"            :class="[              sampleLogos[index].logoID === selectedLogoID                ? 'border-brand-300'                : 'border-neutral-200'            ]"            style="background-repeat: no-repeat; background-size: 100%; background-position: center center;"            :style="{ backgroundImage: `url(${generatedLogoImage.watermark})`}"        >          <img :src="generatedLogoImage.logo" class="object-contain block mx-auto max-h-[130px]" :alt="generatedLogoImage.logoID" />          <div class="logo-item-buttons w-full absolute bottom-0 left-0 right-0 flex flex-row justify-center px-[12px] transition-all duration-300 bg-white/80 py-[10px]"               :class="[              sampleLogos[index].logoID === selectedLogoID                ? 'opacity-1 pointer-events-auto bottom-0'                : 'opacity-0 pointer-events-none bottom-[-10px]'            ]"          >            <!-- buy -->            <div class="button-item w-auto flex-1 px-[12px] relative max-w-fit self-stretch">              <button                  class="buy-button buy-logo-btn w-auto h-full bg-black text-white font-black uppercase text-[13px] py-[12px] px-[15px] lg:px-[20px] xl:px-[22px] xxl:px-[20px] text-center leading-[1.1] tracking-[2px] xl:tracking-[3px] transition transition-fast hover:bg-brand-300 hover:text-white"                  @click.stop.prevent="handleBuy()"                  :disabled="stripeCheckout.loading"              >                <!-- loader when stripeCheckout.loading -->                <svg                    v-if="stripeCheckout.loading"                    xmlns="http://www.w3.org/2000/svg"                    class="inline-block w-[20px] h-[20px] animate-spin"                    viewBox="0 0 50 50"                >                  <circle                      class="background stroke-brand-50"                      cx="25" cy="25" r="20"                      fill="none" stroke-width="8"                  />                  <circle                      class="path stroke-[#00AA8B]"                      cx="25" cy="25" r="20"                      fill="none" stroke-width="8"                      stroke-linecap="round"                      stroke-dasharray="31.4 31.4"                      stroke-dashoffset="0"                  />                </svg>                <!-- text when not loading -->                <span v-else>BUY $99</span>              </button>            </div>            <!-- save logo -->            <div class="save-logo-btn button-item w-auto flex-1 relative max-w-fit self-stretch">              <button class="save-button w-auto h-full border-2 border-black font-black uppercase text-[13px] py-[12px] px-[9px] flex flex-col justify-center items-center tracking-[2px] xl:tracking-[3px] group transition transition-fast hover:bg-brand-300 hover:border-brand-300"                  @click.stop.prevent="handleSaveLogo();">                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">                  <path class="group-hover:fill-white group-hover:stroke-white transition transition-fast" d="M12 21.0417C12 21.0417 3.25 16.395 3.25 9.375C3.25 6.95875 5.29033 5 7.80735 5C9.68921 5 11.3047 6.095 12 7.6575C12.6953 6.095 14.3108 5 16.1927 5C18.7097 5 20.75 6.95875 20.75 9.375C20.75 16.395 12 21.0417 12 21.0417Z"                        stroke="black"                        stroke-width="1.5"                        stroke-linecap="round"                        stroke-linejoin="round"/>                </svg>              </button>            </div>          </div>        </div>      </div>    </div>    <div class="mockup-logos w-full relative grid gap-[15px] grid-cols-12 mt-[15px] lg:mt-[30px] lg:gap-[36px]">      <div class="mockup-item w-full relative block col-span-12">        <image-element image-source="/assets/img/mock-logo-apparel/mock-logo-business-card.png" addon-classes="w-full relative block object-cover"> </image-element>      </div>      <div class="mockup-item w-full relative block col-span-12 sm:col-span-6">        <image-element image-source="/assets/img/mock-logo-apparel/mock-logo-hoodie.png" addon-classes="w-full relative block object-cover"> </image-element>      </div>      <div class="mockup-item w-full relative block col-span-12 sm:col-span-6">        <image-element image-source="/assets/img/mock-logo-apparel/mock-logo-hat.png" addon-classes="w-full relative block object-cover"> </image-element>      </div>      <div class="mockup-item w-full relative block col-span-12">        <image-element image-source="/assets/img/mock-logo-apparel/mock-logo-shirt.png" addon-classes="w-full relative block object-cover"> </image-element>      </div>    </div>      <SaveLogoModal          :show="logoStore.showSaveLogoModal"          @close="logoStore.closeSaveLogoModal"      />  </div></template><style scoped lang="scss"></style>