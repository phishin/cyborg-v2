<script setup>import { ref, computed, watch, onMounted, onUnmounted, inject, provide } from "vue";import isEqual from "lodash/isEqual";import Fuse from "fuse.js";import industryData from "../all-industries.json";import allSuffixes from "../all-suffixes.json";import LogoResults from "./LogoResults.vue";import ImageElement from "../../ImageElement.vue";import SaveLogoModal from "~/components/CreationFlow/SaveLogoModal.vue";// import CustomizeBuySaveLogo from "./CustomizeBuySaveLogo.vue";// import SaveLogoModal from "../../SaveLogoModal.vue";import { useLogoStore } from '~/stores/logoStores';const logoStore = useLogoStore();const isUserLoggedIn = inject("isUserLoggedIn");const isUserLoggedOut = inject("isUserLoggedOut");provide("saveLogoModalVisible", ref(false));// Original state of fields & values for trackingconst originalLogoFieldValues = ref({});const lastSavedLogoValues = ref({});// Function to save original valuesconst saveOriginalLogoFieldValues = () => ({  selectedIndustry: logoStore.selectedIndustry,  selectedLogoStyle: logoStore.selectedLogoStyle,  selectedSuffix: logoStore.selectedSuffix,  selectedColorStyles: [...logoStore.selectedColorStyles],  fullBusinessName: logoStore.fullBusinessName,  businessNameInitials: logoStore.businessNameInitials,  businessCategory: logoStore.businessCategory,});const getCurrentLogoFieldValues = () => ({  selectedIndustry: logoStore.selectedIndustry,  selectedLogoStyle: logoStore.selectedLogoStyle,  selectedSuffix: logoStore.selectedSuffix,  selectedColorStyles: [...logoStore.selectedColorStyles],  fullBusinessName: logoStore.fullBusinessName,  businessNameInitials: logoStore.businessNameInitials,  businessCategory: logoStore.businessCategory,});const saveLogoValuesOnUpdate = () => ({  selectedIndustry: logoStore.selectedIndustry,  selectedLogoStyle: logoStore.selectedLogoStyle,  selectedSuffix: logoStore.selectedSuffix,  selectedColorStyles: [...logoStore.selectedColorStyles],  fullBusinessName: logoStore.fullBusinessName,  businessNameInitials: logoStore.businessNameInitials,  businessCategory: logoStore.businessCategory,})// industry selection states & Industry fieldsconst industryInputRef = ref(null);const selectedIndustry = computed({  get: () => logoStore.selectedIndustry,  set: (val) => { logoStore.selectedIndustry = val; }});const industrySearchQuery = computed({  get: () => logoStore.selectedIndustry,  set: (val) => { logoStore.selectedIndustry = val; }});const industries = ref(industryData);const results = ref([]);const showDropdown = ref(false);const highlightedIndex = ref(-1);// suffix statesconst suffixInputRef = ref(null);const suffixNames = ref(allSuffixes);const selectedSuffix = ref(props.selectedSuffix || null);const showSuffixDropdown = ref(false);const highlightedSuffixIndex = ref(-1);// Business related fieldsconst businessNameInitials = ref(props.businessNameInitials || null);const fullBusinessName = ref(props.fullBusinessName || null);const businessCategory = ref(props.businessCategory || null);const selectedLogoStyle = ref(props.selectedLogoStyle || null);console.log(fullBusinessName);// selected colorsconst selectedColorStyles = ref(props.selectedColorStyles || []);const showColorPickerDropdown = ref(false);// Maximum history size for undo and redo && UNDO & REDOconst maxSaveHistory = 15;const undoHistory = ref([]);const redoHistory = ref([]);const currentState = ref();const updateButtonIsActive = ref(false);const undo = () => {  if (undoHistory.value.length >= 2) {    const lastState = JSON.parse(JSON.stringify(undoHistory.value.pop())); // Deep clone    redoHistory.value.push(lastState);    const previousState = JSON.parse(JSON.stringify(undoHistory.value[undoHistory.value.length - 1]));    restoreState(previousState);    // Explicitly trigger the update button check    checkUpdateButton();  }  const currentState = JSON.parse(JSON.stringify(getCurrentLogoFieldValues()));  const lastState = JSON.parse(JSON.stringify(redoHistory.value[redoHistory.value.length - 1]));};const redo = () => {  if (redoHistory.value.length > 0) {    const nextState = JSON.parse(JSON.stringify(redoHistory.value.pop())); // Deep clone    undoHistory.value.push(nextState);    restoreState(nextState);    // Explicitly trigger the update button check    checkUpdateButton();  }};// Function to explicitly check and set the update button stateconst checkUpdateButton = () => {  const currentState = getCurrentLogoFieldValues();  const lastState = lastSavedLogoValues.value;  if (!isEqual(currentState, lastState)) {    updateButtonIsActive.value = true;    console.log('update button should be true now');  } else {    updateButtonIsActive.value = false;    console.log('update button is false!');  }};// restoring state valuesconst restoreState = (state) => {  // Force reactivity for restored values  selectedIndustry.value = state.selectedIndustry ? { ...state.selectedIndustry } : null;  industrySearchQuery.value = state.selectedIndustry?.name || "";  selectedLogoStyle.value = state.selectedLogoStyle;  selectedSuffix.value = state.selectedSuffix;  // Force array reactivity  selectedColorStyles.value = [...state.selectedColorStyles];  fullBusinessName.value = state.fullBusinessName;  businessNameInitials.value = state.businessNameInitials;  businessCategory.value = state.businessCategory;};// Save state to historyconst saveStateToHistory = () => {  const currentState = getCurrentLogoFieldValues();  const lastState = undoHistory.value[undoHistory.value.length - 1];  if (!isEqual(currentState, lastState)) {    console.log('State changed – pushing new state');    undoHistory.value.push(JSON.parse(JSON.stringify(currentState)));    if (undoHistory.value.length > maxSaveHistory) {      undoHistory.value.shift();    }    redoHistory.value = []; // Clear redo stack  } else {    console.log('State unchanged – not pushing to history');  }};// Emit updated props when Update button is clickedconst updateProps = () => {  saveStateToHistory();  lastSavedLogoValues.value = saveLogoValuesOnUpdate();  emit("updateFields", getCurrentLogoFieldValues());  updateButtonIsActive.value = false;};// Add methods to save state on changesconst changeSelectedLogoStyle = (newStyle) => {  selectedLogoStyle.value = newStyle;};const changeSelectedSuffix = (newSuffix) => {  selectedSuffix.value = newSuffix;};const selectSuffix = (suffix) => {  selectedSuffix.value = suffix.name  showSuffixDropdown.value = false;  if (suffixInputRef.value) {    suffixInputRef.value.blur();  }};const toggleSuffixDropdown = () => {  showSuffixDropdown.value = !showSuffixDropdown.value;};// Logic for color pickerconst toggleColorPicker = () => {  showColorPickerDropdown.value = !showColorPickerDropdown.value;};// Add a ref for the color picker dropdownconst colorPickerDropdownRef = ref(null);const closeColorPickerDropdown = (event) => {  if (      colorPickerDropdownRef.value &&      !colorPickerDropdownRef.value.contains(event.target)  ) {    showColorPickerDropdown.value = false;  }};const toggleSelectedColor = (color) => {  const index = selectedColorStyles.value.indexOf(color);  if (index > -1) {    selectedColorStyles.value.splice(index, 1);  } else if (selectedColorStyles.value.length < 2) {    selectedColorStyles.value.push(color);  }};// Toggle industries dropdown visibility when the input is clickedconst toggleDropdown = () => {  showDropdown.value = !showDropdown.value;};// Close industries dropdown on outside clickconst closeDropdown = (event) => {  const clickedInside = industryInputRef.value?.contains(event.target);  if (!clickedInside) {    showDropdown.value = false;  }};// Fuse.js for industry searchconst fuse = new Fuse(industries.value, {  keys: ["name"],  threshold: 0.3,});// Search logicconst searchIndustries = () => {  const queryValue = industrySearchQuery.value.trim();  if (queryValue) {    results.value = fuse.search(queryValue).map((result) => result.item);  } else {    results.value = industries.value; // Show all industries when query is empty  }};// Select an industryconst selectIndustry = (industry) => {  selectedIndustry.value = industry;  industrySearchQuery.value = industry.name;  showDropdown.value = false;  if (industryInputRef.value) {    industryInputRef.value.blur();  }};const focusedInputField = ref(false); // Track the focused state of the input// Handle focus eventconst handleIndustryFocus = (event) => {  focusedInputField.value = true;  showDropdown.value = true;  results.value = industries.value; // Show all industries on focus  handleInputFieldWithArrowActiveState(event);};const handleIndustryBlur = (event) => {  focusedInputField.value = false;  handleInputFieldWithArrowBlurState(event);  setTimeout(() => {    showDropdown.value = false; // Delay to allow mousedown selection  }, 200);};const handleInputFieldWithArrowActiveState = (event) => {  const parent = event.target.closest('.field-item-input');  const arrowIcon = parent.querySelector('.arrow-icon');  if (arrowIcon) {    arrowIcon.classList.add('active');  }  else {    arrowIcon.classList.remove('active');  }};const handleInputFieldWithArrowBlurState = (event) => {  // Remove the active state from the arrow icon on blur  const parent = event.target.closest('.field-item-input');  const arrowIcon = parent?.querySelector('.arrow-icon');  if (arrowIcon) {    arrowIcon.classList.remove('active');  }}// Keyboard navigationconst handleKeyDown = (event) => {  if (!showDropdown.value || results.value.length === 0) return;  if (event.key === "ArrowDown") {    highlightedIndex.value = (highlightedIndex.value + 1) % results.value.length;  } else if (event.key === "ArrowUp") {    highlightedIndex.value = (highlightedIndex.value - 1 + results.value.length) % results.value.length;  } else if (event.key === "Enter" && highlightedIndex.value >= 0) {    selectIndustry(results.value[highlightedIndex.value]); // Select highlighted item  }};// Validationconst isValidSelection = computed(() =>    industries.value.some((industry) => industry.name.toLowerCase() === industrySearchQuery.value.toLowerCase()));const sidebarRef = ref(null);const mainColumnRef = ref(null);// DATA FOR SELECTING AND EDITING LOGOconst logoEditorSelected = ref(false); // Controls which screen to displayconst selectedLogoID = ref(""); // Stores the ID of the selected logo// Function to activate the logo editorconst activateLogoEditor = (logoID) => {  selectedLogoID.value = logoID; // Set the selected logo ID  logoEditorSelected.value = true; // Switch to the logo editor view};// Optional: Method to reset to default viewconst deactivateLogoEditor = () => {  selectedLogoID.value = ""; // Reset selected logo ID  logoEditorSelected.value = false; // Switch back to default view};watch(    [      selectedIndustry,      industrySearchQuery,      selectedLogoStyle,      selectedSuffix,      selectedColorStyles,      fullBusinessName,      businessNameInitials,      fullBusinessName,      businessCategory,    ],    (update) => {      checkUpdateButton(update);    },    { deep: true });onMounted(() => {  logoStore.logoBuilder = true;  window.scrollTo({    top: 0,    behavior: "auto", // Ensure no smooth scrolling here to align with immediate load  });  // Populated industries for the industries dropdown with the json results  results.value = industries;  window.addEventListener("keydown", handleKeyDown);  undoHistory.value.push(getCurrentLogoFieldValues());  // save the original logo field values from previous screens on this logo builder page load.  originalLogoFieldValues.value = saveOriginalLogoFieldValues();// close dropdown when clicking outside of industry  window.addEventListener("mousedown", closeDropdown);  // Listen for outside clicks  window.addEventListener("mousedown", closeColorPickerDropdown);  // Clean up event listeners  onUnmounted(() => {    undoHistory.value = [];    redoHistory.value = [];    window.removeEventListener("keydown", handleKeyDown);    window.removeEventListener("mousedown", closeDropdown);    window.removeEventListener("mousedown", closeColorPickerDropdown);  });});</script><template>  <div class="logo-builder w-full relative">    <section class="logo-builder-section w-full relative flex flex-col justify-start items-start font-primary mt-[77px] md:mt-[80px] lg:mt-[95px]" v-if="logoStore.logoBuilder">      <!-- Mobile Top Scroller -->      <div class="logo-builder-top-scroll pb-[14px] w-full relative block lg:hidden border-y-2 pt-[12px] border-neutral-200">        <div class="selector-fields-wrapper relative w-full block">          <div class="selector-fields w-full flex flex-row flex-wrap items-center pb-[12px] px-[24px] gap-y-[14px]">            <!-- industry -->            <div class="mobile-input-field w-full relative max-w-[50%] md:max-w-fit pr-[10px]">              <div class="field-item-input w-full relative flex flex-row justify-between items-center">                <input type="text"                       readonly                       class="industry-search-input  w-full md:max-w-[219px] h-[36px] px-[12px] border-[3px] border-[#cfcdcd] font-bold text-black text-[14px] md:text-[16px] bg-white transition focus:border-brand-electric-blue"                       :class="['focused', { focusedInputField }]"                       v-model="industrySearchQuery"                       @input="searchIndustries"                       @focus="handleIndustryFocus"                       @blur="handleIndustryBlur"                       ref="industryInputRef"                />                <span class="arrow-icon absolute right-[17px] max-w-fit transform -rotate-90 transition-all duration-200">                   <svg width="14" height="10" viewBox="0 0 14 10" fill="none" xmlns="http://www.w3.org/2000/svg">                          <path fill-rule="evenodd" clip-rule="evenodd" d="M0.410051 1.2101C0.956784 0.663365 1.84322 0.663365 2.38995 1.2101L7 5.82015L11.6101 1.2101C12.1568 0.663365 13.0432 0.663365 13.5899 1.2101C14.1367 1.75683 14.1367 2.64326 13.5899 3.19L7.98995 8.79C7.44322 9.33673 6.55678 9.33673 6.01005 8.79L0.410051 3.19C-0.136684 2.64326 -0.136684 1.75683 0.410051 1.2101Z" fill="#1F2937"/>                          </svg>               </span>              </div>              <!-- Mobile industry dropdown -->              <ul v-if="showDropdown && results.length" class="dropdown-wrapper w-full lg:hidden md:max-w-[219px] absolute top-[35px] left-0 bg-white shadow-md z-[999] max-h-[320px] overflow-y-scroll">                <li                    v-for="(industry, index) in results"                    :key="industry.id"                    @mousedown.prevent="selectIndustry(industry)"                    @click.prevent="toggleDropdown"                    :class="[                      'dropdown-item text-[16px] font-medium lg:font-semibold py-[12px] px-[12px] cursor-pointer transition transition-fast leading-[1.1]',                      {                        'bg-neutral-100 text-brand-electric-blue': index === highlightedIndex || industrySearchQuery === industry.name,                        'text-black': index !== highlightedIndex && industrySearchQuery !== industry.name                      }                    ]">                  {{ industry.name }}                </li>              </ul>            </div>            <!-- Other fields here -->            <div class="mobile-input-field w-full relative max-w-[50%] md:max-w-fit">              <input type="text" class="w-full md:max-w-[219px] h-[36px] px-[12px] border-[3px] border-[#cfcdcd] font-bold text-black text-[14px] md:text-[16px]bg-white transition focus:border-brand-electric-blue" v-model="fullBusinessName" placeholder="Full Business Name" />            </div>            <div class="mobile-input-field w-full relative max-w-[50%] md:max-w-fit pr-[10px]">              <input type="text" class="w-full md:max-w-[219px] h-[36px] px-[12px] border-[3px] border-[#cfcdcd] font-bold text-black text-[14px] md:text-[16px] bg-white transition focus:border-brand-electric-blue" v-model="businessNameInitials" placeholder="Business Name Initials" />            </div>            <div class="mobile-input-field w-full relative max-w-[50%] md:max-w-fit">              <input type="text" class="w-full md:max-w-[219px] h-[36px] px-[12px] border-[3px] border-[#cfcdcd] font-bold text-black text-[14px] md:text-[16px] bg-white transition focus:border-brand-electric-blue" v-model="businessCategory" placeholder="Business Category" />            </div>            <div class="mobile-input-field w-full relative max-w-[50%] md:max-w-fit pr-[10px]">              <input type="text" class="w-full h-[36px] px-[12px] border-[3px] border-[#cfcdcd] font-bold text-black text-[14px] md:text-[16px] bg-white transition focus:border-brand-electric-blue" v-model="selectedSuffix" />            </div>            <div class="mobile-input-field w-full relative max-w-[50%] md:max-w-fit">              <input type="text" class="w-full h-[36px] px-[12px] border-[3px] border-[#cfcdcd] font-bold text-black text-[14px] md:text-[16px] bg-white transition focus:border-brand-electric-blue" v-model="selectedSuffix" />            </div>          </div>          <!-- update button -->          <div class="mobile-update-button w-full mb-[25px] px-[24px] mt-[24px] gap-y-[8px] flex flex-col relative">            <div class="update-button w-full relative block">              <button                  :disabled="!updateButtonIsActive"                  @click="updateProps"                  :class="{                      'bg-brand-300 text-white cursor-pointer': updateButtonIsActive,                      'bg-neutral-200 text-neutral-400 cursor-not-allowed': !updateButtonIsActive,                    }"                  class="w-full h-[48px]  flex flex-row justify-center items-center py-[9px] px-[40px] mx-auto  text-[16px] font-medium gap-[10px]  transition transition-fast">                <svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">                  <path                      class="transition transition-fast"                      :class="{ 'stroke-white': updateButtonIsActive }"                      d="M12.7506 6.04713H17.25V6.04552M1 15.326V10.8266M1 10.8266L5.49944 10.8266M1 10.8266L3.86667 13.6951C4.75934 14.5894 5.89222 15.268 7.20056 15.6185C11.1669 16.6813 15.2438 14.3275 16.3066 10.3612M1.94321 6.51254C3.00598 2.54621 7.08288 0.192412 11.0492 1.25519C12.3576 1.60576 13.4904 2.2843 14.3831 3.17865L17.25 6.04552M17.25 1.54772V6.04552" stroke="#9CA3AF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>                </svg>                Update              </button>            </div>          </div>        </div>      </div>      <!-- Logo Builder Main Content -->      <div class="logo-builder-main w-full flex flex-row flex-nowrap border-b-2 border-neutral-200" id="main">        <!-- Sidebar -->        <div class="sidebar w-full hidden lg:block lg:w-[237px] lg:max-w-[237px] border-r-2 border-r-[#D1D5DB] self-stretch">          <div class="sidebar-wrapper w-full h-auto sticky top-[119px]">            <div class="user-back-forward-controls w-full mb-[25px] pl-[24px] pr-[22px] mt-[24px] gap-y-[8px] flex flex-col relative">              <div class="undo-redo w-full relative flex flex-row gap-[12px]">                <!-- Undo Button -->                <button                    @click="undo"                    :disabled="undoHistory.length === 1"                    :class="{ 'cursor-pointer text-black border-2 border-black  bg-white': undoHistory.length >= 2, 'bg-neutral-200 border-2 border-transparent text-neutral-300 cursor-not-allowed': undoHistory.length <= 1 }"                    class="flex flex-row justify-center items-center w-[90px] h-[48px] transition transition-fast">                    <span class="icon w-[24px] h-[24px] flex flex-col justify-center items-center">                      <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">                        <path                            class="transition transition-fast"                            :class="{ 'stroke-black': undoHistory.length >= 2, 'stroke-[#9CA3AF]': undoHistory.length <= 1 }"                            d="M7.13109 18.3101H15.1311C17.8911 18.3101 20.1311 16.0701 20.1311 13.3101C20.1311 10.5501 17.8911 8.31012 15.1311 8.31012H4.13109M6.43109 10.8101L3.87109 8.25012L6.43109 5.69012"                            stroke="#9CA3AF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"                        />                      </svg>                    </span>                  <span class="text font-medium text-[16px] leading-[1]">Undo</span>                </button>                <!-- Redo Button -->                <button                    @click="redo"                    :disabled="redoHistory.length === 0"                    :class="{ 'cursor-pointer text-black border-2 border-black bg-white': redoHistory.length > 0, 'bg-neutral-200 border-2 border-transparent text-neutral-300 cursor-not-allowed': redoHistory.length === 0 }"                    class="flex flex-row justify-center items-center w-[90px] h-[48px]  cursor-not-allowed transition transition-fast">                    <span class="icon w-[24px] h-[24px] flex flex-col justify-center items-center">                      <svg width="18" height="16" viewBox="0 0 18 16" fill="none" xmlns="http://www.w3.org/2000/svg">                     <path                         :class="{ 'stroke-black': redoHistory.length > 0, 'stroke-[#9CA3AF]': redoHistory.length === 0 }"                         d="M13.8689 14.3101H5.86891C3.10891 14.3101 0.868908 12.0701 0.868908 9.31012C0.868908 6.55012 3.10891 4.31012 5.86891 4.31012H16.8689M14.5689 6.81012L17.1289 4.25012L14.5689 1.69012" stroke="#9CA3AF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>                    </svg>                    </span>                  <span class="text font-medium text-[16px] leading-[1]">                      Redo                    </span>                </button>              </div>              <div class="update-button w-full relative block">                <button                    :disabled="!updateButtonIsActive"                    @click="updateProps"                    :class="{                      'bg-brand-300 text-white cursor-pointer': updateButtonIsActive,                      'bg-neutral-200 text-neutral-400 cursor-not-allowed': !updateButtonIsActive,                    }"                    class="w-full h-[48px]  flex flex-row justify-center items-center py-[9px] px-[40px] mx-auto  text-[16px] font-medium gap-[10px]  transition transition-fast">                  <svg width="18" height="17" viewBox="0 0 18 17" fill="none" xmlns="http://www.w3.org/2000/svg">                    <path                        class="transition transition-fast"                        :class="{ 'stroke-white': updateButtonIsActive }"                        d="M12.7506 6.04713H17.25V6.04552M1 15.326V10.8266M1 10.8266L5.49944 10.8266M1 10.8266L3.86667 13.6951C4.75934 14.5894 5.89222 15.268 7.20056 15.6185C11.1669 16.6813 15.2438 14.3275 16.3066 10.3612M1.94321 6.51254C3.00598 2.54621 7.08288 0.192412 11.0492 1.25519C12.3576 1.60576 13.4904 2.2843 14.3831 3.17865L17.25 6.04552M17.25 1.54772V6.04552" stroke="#9CA3AF" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>                  </svg>                  Update                </button>              </div>            </div>            <!-- Main Sidebar Fields -->            <div class="logo-builder-sidebar h-full overflow-y-auto w-full relative grid grid-cols-1 gap-y-[22px] pl-[24px] pr-[22px] pb-[100px]" ref="sidebarRef">              <!-- Industry -->              <div class="field-item w-full relative">                <p class="block relative w-full text-neutral-900 font-medium text-[17px] leading-[1.2] mb-[3px]"> Industry</p>                <div class="field-item-input w-full relative flex flex-row justify-between items-center">                  <input type="text"                         readonly                         class="w-full relative bg-white border-[3px] py-[15px] pl-[16px] pr-[12px] border-brand-field-border-gray flex flex-row justify-between items-center text-[15px] font-bold text-black focus:border-brand-electric-blue cursor-pointer has-arrow"                         :class="['focused', { focusedInputField }]"                         v-model="industrySearchQuery"                         @input="searchIndustries"                         @focus="handleIndustryFocus"                         @blur="handleIndustryBlur"                         ref="industryInputRef"                  />                  <span class="arrow-icon absolute right-[17px] max-w-fit transform -rotate-90 transition-all duration-200">                   <svg width="14" height="10" viewBox="0 0 14 10" fill="none" xmlns="http://www.w3.org/2000/svg">                          <path fill-rule="evenodd" clip-rule="evenodd" d="M0.410051 1.2101C0.956784 0.663365 1.84322 0.663365 2.38995 1.2101L7 5.82015L11.6101 1.2101C12.1568 0.663365 13.0432 0.663365 13.5899 1.2101C14.1367 1.75683 14.1367 2.64326 13.5899 3.19L7.98995 8.79C7.44322 9.33673 6.55678 9.33673 6.01005 8.79L0.410051 3.19C-0.136684 2.64326 -0.136684 1.75683 0.410051 1.2101Z" fill="#1F2937"/>                          </svg>               </span>                </div>                <!-- Dropdown for search results -->                <ul v-if="showDropdown && results.length" class="dropdown-list absolute w-full border border-neutral-200 bg-white max-h-[300px] h-[300px] overflow-y-auto z-10">                  <li                      v-for="(industry, index) in results"                      :key="industry.id"                      @mousedown.prevent="selectIndustry(industry)"                      :class="[                      'dropdown-item text-[16px] font-medium lg:font-semibold py-[12px] px-[12px] cursor-pointer transition transition-fast leading-[1.1]',                      {                        'bg-neutral-100 text-brand-electric-blue': index === highlightedIndex || industrySearchQuery === industry.name,                        'text-black': index !== highlightedIndex && industrySearchQuery !== industry.name                      }                    ]">                    {{ industry.name }}                  </li>                </ul>              </div>              <!--- Full Business Name -->              <div class="field-item w-full relative" v-if="fullBusinessName">                <p class="block relative w-full text-neutral-900 font-medium text-[17px] leading-[1.2] mb-[3px]"> Full business name</p>                <input type="text" class="w-full relative bg-white border-[3px] py-[15px] pl-[16px] pr-[12px] border-brand-field-border-gray flex flex-row justify-between items-center text-[15px] font-bold text-black focus:border-brand-electric-blue" v-model="fullBusinessName" />              </div>              <!--Business Name Initials -->              <div class="field-item w-full relative" v-if="businessNameInitials">                <p class="block relative w-full text-neutral-900 font-medium text-[17px] leading-[1.2] mb-[3px]">Business Name Initials</p>                <input type="text" class="w-full relative bg-white border-[3px] py-[15px] pl-[16px] pr-[12px] border-brand-field-border-gray flex flex-row justify-between items-center text-[15px] font-bold text-black focus:border-brand-electric-blue" v-model="businessNameInitials" />              </div>              <!-- Business Category -->              <div class="field-item w-full relative">                <p class="block relative w-full text-neutral-900 font-medium text-[17px] leading-[1.2] mb-[3px]"> Business category</p>                <input type="text" class="w-full relative bg-white border-[3px] py-[15px] pl-[16px] pr-[12px] border-brand-field-border-gray flex flex-row justify-between items-center text-[15px] font-bold text-black focus:border-brand-electric-blue" v-model="businessCategory" />              </div>              <!-- Suffix -->              <div class="field-item w-full relative">                <p class="block relative w-full text-neutral-900 font-medium text-[17px] leading-[1.2] mb-[3px]"> Suffix</p>                <div class="field-item-input w-full relative flex flex-row justify-between items-center">                  <input type="text"                         readonly                         class="w-full relative bg-white border-[3px] py-[15px] pl-[16px] pr-[12px] border-brand-field-border-gray flex flex-row justify-between items-center text-[15px] font-bold text-black focus:border-brand-electric-blue cursor-pointer has-arrow"                         :class="['focused', { focusedInputField }]"                         v-model="selectedSuffix"                         @click.prevent="toggleSuffixDropdown"                         @input="showSuffixDropdown"                         @focus="showSuffixDropdown === true"                         ref="suffixInputRef"                  />                  <span class="arrow-icon absolute right-[17px] max-w-fit transform -rotate-90 transition-all duration-200" :class="{ 'rotate-0': showSuffixDropdown }">                   <svg  width="14" height="10" viewBox="0 0 14 10" fill="none" xmlns="http://www.w3.org/2000/svg">                      <path fill-rule="evenodd" clip-rule="evenodd" d="M0.410051 1.2101C0.956784 0.663365 1.84322 0.663365 2.38995 1.2101L7 5.82015L11.6101 1.2101C12.1568 0.663365 13.0432 0.663365 13.5899 1.2101C14.1367 1.75683 14.1367 2.64326 13.5899 3.19L7.98995 8.79C7.44322 9.33673 6.55678 9.33673 6.01005 8.79L0.410051 3.19C-0.136684 2.64326 -0.136684 1.75683 0.410051 1.2101Z" fill="#1F2937"/>                    </svg>               </span>                </div>                <!-- Dropdown for suffixes -->                <ul v-if="showSuffixDropdown && suffixNames.length" class="dropdown-list absolute w-full border border-neutral-200 bg-white max-h-[300px] h-[300px] overflow-y-auto z-10">                  <li                      v-for="(suffix, index) in suffixNames"                      :key="suffix.id"                      @mousedown.prevent="selectSuffix(suffix)"                      @click="selectSuffix(suffix)"                      :class="[                      'dropdown-item text-[16px] font-medium lg:font-semibold py-[12px] px-[12px] cursor-pointer transition transition-fast leading-[1.1]',                      {                        'bg-neutral-100 text-brand-electric-blue': index === highlightedSuffixIndex || selectedSuffix === suffix.name,                        'text-black': index !== highlightedSuffixIndex && selectedSuffix !== suffix.name                      }                    ]">                    {{ suffix.name }}                  </li>                </ul>              </div>              <!-- Color Picker -->              <div class="field-item w-full relative">                <p class="block relative w-full text-neutral-900 font-medium text-[17px] leading-[1.2] mb-[3px]">Colors</p>                <button                    type="button"                    aria-label="Color Picker Button"                    @click.prevent="toggleColorPicker"                    class="w-full relative bg-white border-[3px] py-[15px] pl-[16px] pr-[12px] border-brand-field-border-gray flex flex-row justify-between items-center text-[15px] font-bold text-black focus:border-brand-electric-blue">                  <image-element image-source="/assets/img/color-wheel-picker.png" addon-classes="object-contain block mr-auto"> </image-element>                  <span                      :class="{ 'rotate-90 transform': showColorPickerDropdown }"                      class="chevron-icon flex-auto max-w-fit w-auto transition transition-fast">                  <svg class="relative top-[3px] transition transition-fast" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">                    <path fill-rule="evenodd" clip-rule="evenodd" d="M6.21083 16.5901C5.6641 16.0433 5.6641 15.1569 6.21083 14.6102L10.8209 10.0001L6.21083 5.39007C5.6641 4.84334 5.6641 3.95691 6.21083 3.41017C6.75757 2.86344 7.644 2.86344 8.19073 3.41017L13.7907 9.01017C14.3375 9.55691 14.3375 10.4433 13.7907 10.9901L8.19073 16.5901C7.644 17.1368 6.75757 17.1368 6.21083 16.5901Z" fill="#1F2937"/>                    </svg>                </span>                  <span class="color-picker-count bg-black rounded-full text-white font-bold text-center w-[24px] h-[24px] absolute top-[-13px] right-[-11px] text-[12px] flex flex-col justify-center items-center"> {{ selectedColorStyles.length }} </span>                </button>                <!-- Dropdown for color picker -->                <transition>                  <div v-show="showColorPickerDropdown"                       ref="colorPickerDropdownRef"                       class="dropdown-list absolute bottom-0 top-[100%] left-0 min-h-[200px] right-0 w-full border border-neutral-200 bg-white h-auto overflow-y-auto z-10 grid grid-cols-3 gap-x-[14px] gap-y-[12px] p-[12px]">                    <button class="w-full h-full max-h-[36px] relative border-2"                            :class="{                    'border-brand-200': selectedColorStyles.includes('Red'),                    'border-transparent border-2': !selectedColorStyles.includes('Red')                  }"                            @click="toggleSelectedColor('Red')">                      <image-element image-source="/assets/img/color-picker/red.png" addon-classes="w-full h-full object-cover"></image-element>                      <span                          class="check-icon max-w-fit w-[24px] h-[24px] absolute right-[-6px] top-[-6px]"                          :class="{                        'opacity-100': selectedColorStyles.includes('Red'),                        'opacity-0 pointer-events-none': !selectedColorStyles.includes('Red')                  }">                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24ZM17.5607 10.0607C18.1464 9.47487 18.1464 8.52513 17.5607 7.93934C16.9749 7.35355 16.0251 7.35355 15.4393 7.93934L10.5 12.8787L8.56066 10.9393C7.97487 10.3536 7.02513 10.3536 6.43934 10.9393C5.85355 11.5251 5.85355 12.4749 6.43934 13.0607L9.43934 16.0607C10.0251 16.6464 10.9749 16.6464 11.5607 16.0607L17.5607 10.0607Z" fill="#00DBC9"/>                  </svg>                  </span>                    </button>                    <button class="w-full h-full max-h-[36px] relative border-2 transition-all duration-200"                            :class="{                    'border-brand-200': selectedColorStyles.includes('Orange'),                    'border-transparent border-2': !selectedColorStyles.includes('Orange')                  }"                            @click="toggleSelectedColor('Orange')">                      <image-element image-source="/assets/img/color-picker/orange.png" addon-classes="w-full h-full object-cover"></image-element>                      <span                          class="check-icon max-w-fit w-[24px] h-[24px] absolute right-[-6px] top-[-6px]"                          :class="{                        'opacity-100': selectedColorStyles.includes('Orange'),                        'opacity-0 pointer-events-none': !selectedColorStyles.includes('Orange')                  }">                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24ZM17.5607 10.0607C18.1464 9.47487 18.1464 8.52513 17.5607 7.93934C16.9749 7.35355 16.0251 7.35355 15.4393 7.93934L10.5 12.8787L8.56066 10.9393C7.97487 10.3536 7.02513 10.3536 6.43934 10.9393C5.85355 11.5251 5.85355 12.4749 6.43934 13.0607L9.43934 16.0607C10.0251 16.6464 10.9749 16.6464 11.5607 16.0607L17.5607 10.0607Z" fill="#00DBC9"/>                  </svg>                  </span>                    </button>                    <button class="w-full h-full max-h-[36px] relative border-2 transition-all duration-200"                            :class="{                    'border-brand-200': selectedColorStyles.includes('Yellow'),                    'border-transparent border-2': !selectedColorStyles.includes('Yellow')                  }"                            @click="toggleSelectedColor('Yellow')">                      <image-element image-source="/assets/img/color-picker/yellow.png" addon-classes="w-full h-full object-cover"></image-element>                      <span                          class="check-icon max-w-fit w-[24px] h-[24px] absolute right-[-6px] top-[-6px]"                          :class="{                    'opacity-100': selectedColorStyles.includes('Yellow'),                    'opacity-0 pointer-events-none': !selectedColorStyles.includes('Yellow')                  }">                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24ZM17.5607 10.0607C18.1464 9.47487 18.1464 8.52513 17.5607 7.93934C16.9749 7.35355 16.0251 7.35355 15.4393 7.93934L10.5 12.8787L8.56066 10.9393C7.97487 10.3536 7.02513 10.3536 6.43934 10.9393C5.85355 11.5251 5.85355 12.4749 6.43934 13.0607L9.43934 16.0607C10.0251 16.6464 10.9749 16.6464 11.5607 16.0607L17.5607 10.0607Z" fill="#00DBC9"/>                  </svg>                  </span>                    </button>                    <button class="w-full h-full max-h-[36px] relative border-2 transition-all duration-200"                            :class="{                    'border-brand-200': selectedColorStyles.includes('Blue'),                    'border-transparent border-2': !selectedColorStyles.includes('Blue')                  }"                            @click="toggleSelectedColor('Blue')">                      <image-element image-source="/assets/img/color-picker/blue.png" addon-classes="w-full h-full object-cover"></image-element>                      <span                          class="check-icon max-w-fit w-[24px] h-[24px] absolute right-[-6px] top-[-6px]"                          :class="{                        'opacity-100': selectedColorStyles.includes('Blue'),                        'opacity-0 pointer-events-none': !selectedColorStyles.includes('Blue')                  }">                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24ZM17.5607 10.0607C18.1464 9.47487 18.1464 8.52513 17.5607 7.93934C16.9749 7.35355 16.0251 7.35355 15.4393 7.93934L10.5 12.8787L8.56066 10.9393C7.97487 10.3536 7.02513 10.3536 6.43934 10.9393C5.85355 11.5251 5.85355 12.4749 6.43934 13.0607L9.43934 16.0607C10.0251 16.6464 10.9749 16.6464 11.5607 16.0607L17.5607 10.0607Z" fill="#00DBC9"/>                  </svg>                  </span>                    </button>                    <button class="w-full h-full max-h-[36px] relative border-2 transition-all duration-200"                            :class="{                    'border-brand-200': selectedColorStyles.includes('Purple'),                    'border-transparent border-2': !selectedColorStyles.includes('Purple')                  }"                            @click="toggleSelectedColor('Purple')">                      <image-element image-source="/assets/img/color-picker/purple.png" addon-classes="w-full h-full object-cover"></image-element>                      <span                          class="check-icon max-w-fit w-[24px] h-[24px] absolute right-[-6px] top-[-6px]"                          :class="{                        'opacity-100': selectedColorStyles.includes('Purple'),                        'opacity-0 pointer-events-none': !selectedColorStyles.includes('Purple')                  }">                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24ZM17.5607 10.0607C18.1464 9.47487 18.1464 8.52513 17.5607 7.93934C16.9749 7.35355 16.0251 7.35355 15.4393 7.93934L10.5 12.8787L8.56066 10.9393C7.97487 10.3536 7.02513 10.3536 6.43934 10.9393C5.85355 11.5251 5.85355 12.4749 6.43934 13.0607L9.43934 16.0607C10.0251 16.6464 10.9749 16.6464 11.5607 16.0607L17.5607 10.0607Z" fill="#00DBC9"/>                  </svg>                  </span>                    </button>                    <button class="w-full h-full max-h-[36px] relative border-2 transition-all duration-200"                            :class="{                    'border-brand-200': selectedColorStyles.includes('Green'),                    'border-transparent border-2': !selectedColorStyles.includes('Green')                  }"                            @click="toggleSelectedColor('Green')">                      <image-element image-source="/assets/img/color-picker/green.png" addon-classes="w-full h-full object-cover"></image-element>                      <span                          class="check-icon max-w-fit w-[24px] h-[24px] absolute right-[-6px] top-[-6px]"                          :class="{                        'opacity-100': selectedColorStyles.includes('Green'),                        'opacity-0 pointer-events-none': !selectedColorStyles.includes('Green')                  }">                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24ZM17.5607 10.0607C18.1464 9.47487 18.1464 8.52513 17.5607 7.93934C16.9749 7.35355 16.0251 7.35355 15.4393 7.93934L10.5 12.8787L8.56066 10.9393C7.97487 10.3536 7.02513 10.3536 6.43934 10.9393C5.85355 11.5251 5.85355 12.4749 6.43934 13.0607L9.43934 16.0607C10.0251 16.6464 10.9749 16.6464 11.5607 16.0607L17.5607 10.0607Z" fill="#00DBC9"/>                  </svg>                  </span>                    </button>                    <button class="w-full h-full max-h-[36px] relative border-2 transition-all duration-200"                            :class="{                    'border-brand-200': selectedColorStyles.includes('Gray'),                    'border-transparent border-2': !selectedColorStyles.includes('Gray')                  }"                            @click="toggleSelectedColor('Gray')">                      <image-element image-source="/assets/img/color-picker/gray.png" addon-classes="w-full h-full object-cover"></image-element>                      <span                          class="check-icon max-w-fit w-[24px] h-[24px] absolute right-[-6px] top-[-6px]"                          :class="{                        'opacity-100': selectedColorStyles.includes('Gray'),                        'opacity-0 pointer-events-none': !selectedColorStyles.includes('Gray')                  }">                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24ZM17.5607 10.0607C18.1464 9.47487 18.1464 8.52513 17.5607 7.93934C16.9749 7.35355 16.0251 7.35355 15.4393 7.93934L10.5 12.8787L8.56066 10.9393C7.97487 10.3536 7.02513 10.3536 6.43934 10.9393C5.85355 11.5251 5.85355 12.4749 6.43934 13.0607L9.43934 16.0607C10.0251 16.6464 10.9749 16.6464 11.5607 16.0607L17.5607 10.0607Z" fill="#00DBC9"/>                  </svg>                  </span>                    </button>                    <button class="w-full h-full max-h-[36px] relative border-2 transition-all duration-200"                            :class="{                    'border-brand-200': selectedColorStyles.includes('Black'),                    'border-transparent border-2': !selectedColorStyles.includes('Black')                  }"                            @click="toggleSelectedColor('Black')">                      <image-element image-source="/assets/img/color-picker/black.png" addon-classes="w-full h-full object-cover"></image-element>                      <span                          class="check-icon max-w-fit w-[24px] h-[24px] absolute right-[-6px] top-[-6px]"                          :class="{                        'opacity-100': selectedColorStyles.includes('Black'),                        'opacity-0 pointer-events-none': !selectedColorStyles.includes('Black')                  }">                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 24C18.6274 24 24 18.6274 24 12C24 5.37258 18.6274 0 12 0C5.37258 0 0 5.37258 0 12C0 18.6274 5.37258 24 12 24ZM17.5607 10.0607C18.1464 9.47487 18.1464 8.52513 17.5607 7.93934C16.9749 7.35355 16.0251 7.35355 15.4393 7.93934L10.5 12.8787L8.56066 10.9393C7.97487 10.3536 7.02513 10.3536 6.43934 10.9393C5.85355 11.5251 5.85355 12.4749 6.43934 13.0607L9.43934 16.0607C10.0251 16.6464 10.9749 16.6464 11.5607 16.0607L17.5607 10.0607Z" fill="#00DBC9"/>                  </svg>                  </span>                    </button>                  </div>                </transition>              </div>            </div>          </div>        </div>        <!-- Main column -->        <div class="main-column w-full self-stretch relative block px-[24px] md:px-[30px] lg:px-[25px] lg:flex-1 pb-[120px] md:pb-[170px] lg:pb-[230px]">          <div class="main-column-wrapper w-full h-full relative" ref="mainColumnRef">            <!-- Default logo builder screen -->            <div class="default-logo-builder w-full h-full relative" v-if="!logoEditorSelected">              <div class="intro-text w-full relative pt-[36px] lg:pt-[80px] block">                <strong class="relative block w-full text-[#22C55E] font-black text-base leading-[1] pb-[12px] tracking-[3px] uppercase"> Displaying 12 results </strong>                <h1 class="block w-full relative text-black text-[20px] lg:text-[32px] leading-[1] font-bold pb-[12px] lg:pb-[18px]"> Choose the logo you like best, and see different versions </h1>                <p class="block relative w-full text-black text-[18px] lg:text-[24px] leading-[1]"> Still think it needs a tweak? Customize your options to perfectly match your vision.</p>              </div>              <div class="main-logo-results w-full relative flex flex-row justify-start">                <div class="main-column w-full lg:flex-1">                  <logo-results @activeLogoEditor="activateLogoEditor" />                </div>              </div>              <div class="bottom-text w-full relative block pt-[90px]">                <h4 class="block text-black font-bold text-[38px] lg:text-[32px] relative leading-[1.2]">                  Think we're not perfectly aligned yet?                </h4>                <p class="block relative w-full text-[18px] md:text-[20px] lg:text-[24px] text-black font-normal pt-[12px]"> Use the tools on the left to revisit your answers and let's refine the results together. </p>              </div>            </div>            <!-- edit selected logo screen -->            <div class="customize-buy-save-logo w-full relative">              <customize-buy-save-logo                  v-if="logoEditorSelected"                  :logo-id="selectedLogoID"                  :selectedColorStyles="selectedColorStyles"              />            </div>          </div>        </div>      </div>    </section>    <SaveLogoModal />  </div></template><style scoped lang="scss">.fadeUp-enter-active, .fadeUp-leave-active {  transition: opacity 0.5s ease, transform 0.5s ease;}.fadeUp-enter-from {  opacity: 0;  transform: translateY(30px); /* Start slightly below */}.fadeUp-enter-to {  opacity: 1;  transform: translateY(0); /* End at normal position */}.fadeUp-leave-from {  opacity: 1;  transform: translateY(0); /* Start at normal position */}.fadeUp-leave-to {  opacity: 0;  transform: translateY(-30px); /* Move slightly above */}.logo-builder {  .overflow-scroll, .overflow-auto {    &::-webkit-scrollbar {      width: 8px;      background: #f1f1f1;    }    &::-webkit-scrollbar-thumb {      background: #888;    }    -ms-overflow-style: none;  /* IE and Edge */    scrollbar-width: none;  /* Firefox */  }  .field-item-input {    .arrow-icon {      transition: transform 0.3s ease;    }    .arrow-icon.active {      transform: rotate(0deg);    }  }}/* Optional styling for dropdown */.dropdown-list {  @media only screen and (min-width: 1024px) {    box-shadow: 0 5px 12px 3px rgba(0,0,0, .10);  }}.dropdown-item:hover {  background-color: #e2e8f0; /* Replace with your brand color */}.industry-search-input {  transition: border-color 0.3s, box-shadow 0.3s; // Smooth transition for focus effect  &:focus,  &:active {    outline: none;  }}.search-industry-input-field {  position: relative;  &.focused label {    top: 10px; // Move label to the top when focused    transition: color 0.3s, top 0.3s;  }}.logo-builder {  .selector-fields-wrapper {    .selector-fields {      -ms-overflow-style: none;  /* IE and Edge */      &::webkit-scrollbar {        height: 2px;        width: 100%;        background-color: blue;      }    }  }}.logo-builder-sidebar {  -ms-overflow-style: none; /* IE and Edge */  scrollbar-width: none; /* Firefox */  &::-webkit-scrollbar {    display: none;  }  input {    &:focus, &:focus-within, &:active, &:focus-visible {      border-color: #00A5FD;      outline: none;    }  }  .field-item {    -ms-overflow-style: none; /* IE and Edge */    scrollbar-width: none; /* Firefox */    & *, & > * {      -ms-overflow-style: none; /* IE and Edge */      scrollbar-width: none; /* Firefox */      &::-webkit-scrollbar {        display: none;      }    }  }  .field-item::-webkit-scrollbar {    display: none;  }}.mobile-input-field {  input::placeholder {    font-size: 14px;    font-weight: 400;  }}</style>