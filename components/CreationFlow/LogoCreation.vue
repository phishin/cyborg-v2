<script setup>  import { ref, onMounted, onBeforeUnmount, inject, computed } from 'vue';  // import components  import GenerateLogoLoading from "./GenerateLogoLoading.vue";  // logo builder screens  import LogoBuilder from "./LogoBuilder/LogoBuilder.vue";  // set the global states of the site  const globalCreationState = inject('globalCreationState');  const createMyLogoIsActive = inject('createMyLogoIsActive');  const prePopulatedBusinessName = computed(() => globalCreationState?.companyName || '');  console.log(globalCreationState.companyName + ' the company name');  // Set initial progress status to 0%  const progressStatus = ref(0);  // set transitioning between steps value  const isTransitioning = ref(false); // New ref to control step visibility  // variables for the following fields that can have values  const selectedIndustry = ref(null);  const selectedLogoStyle = ref(null);  const fullBusinessName = ref(null);  const businessNameInitials = ref(null);  const selectedSuffix = ref(null);  const businessCategory = ref(null);  const sloganOrTagline = ref(null);  const preferredSymbolsOrStyles = ref([]);  const selectedFontStyles = ref([]);  const selectedColorStyles = ref([]);  const startGenerationLogo = ref(false);  const logoBuilderActive = ref(false);  // Functions to handle selections to pass values through components  const handleSelectIndustry = (industry) => {    selectedIndustry.value = industry || null; // Ensure null if no selection  };  const handleSelectedLogoStyle = (style) => {    selectedLogoStyle.value = style; // Store the selected logo style in the parent  };  const handleSelectedSuffix = (suffix) => {    selectedSuffix.value = suffix;  }  const handleBusinessNameInitials = (enteredValue) => {    businessNameInitials.value = enteredValue;  }  const handleFullBusinessName = (enteredValue) => {    fullBusinessName.value = enteredValue;  }  const handleBusinessCategory = (enteredValue) => {    businessCategory.value = enteredValue;  }  const handleSloganOrTagline = (enteredValue) => {    sloganOrTagline.value = enteredValue;  }  const handlePreferredSymbolOrStyles = (selectedSymbols) => {    preferredSymbolsOrStyles.value = selectedSymbols;  };  const handleSelectedFontStyles = (selectedStyles) => {    selectedFontStyles.value = selectedStyles;  };  const handleSelectedColors = (selectedColors) => {    selectedColorStyles.value = selectedColors;  };  // Show logo generation screen and then transition to logo builder  const handleStartGenerationLogo = (status) => {    startGenerationLogo.value = true;    setTimeout(() => {      startGenerationLogo.value = false;      logoBuilderActive.value = true;      globalCreationState.logoBuilder = true;      globalCreationState.creationStep = 0; // Ensure correct step reset    }, 1000);  };  const scrollToTop = () => {    window.scrollTo({      top: 0,      behavior: "smooth", // Smooth scrolling for better UX    });  };  // Function to handle progress updates from the child  const updateProgress = (value) => {    progressStatus.value = value;  };  // Advance or go back a step  const advanceStep = () => {    if (globalCreationState.creationStep < 7) {      scrollToTop(); // Scroll to top before advancing      setTimeout(() => {        globalCreationState.creationStep += 1;        updateProgress((globalCreationState.creationStep / 7) * 100);        isTransitioning.value = true; // Start transition      }, 300); // Add delay to allow scroll to finish    }  };  const previousStep = () => {    if (globalCreationState.creationStep > 1) {      scrollToTop(); // Scroll to top before going back      setTimeout(() => {        globalCreationState.creationStep -= 1;        updateProgress((globalCreationState.creationStep / 7) * 100);        isTransitioning.value = true; // Start transition      }, 300); // Add delay to allow scroll to finish    }  };  // Disable back button  const disableBackButton = () => {    history.pushState(null, document.title, window.location.href);  };  // Initialize on mount manually adjust the step here  onMounted(() => {    globalCreationState.creationStep = 1;    createMyLogoIsActive.value = true;    console.log(globalCreationState.companyName);    // if there's a company name from the homepage enter business name field    if(globalCreationState.companyName) {      selectedLogoStyle.value = 'Full Business Name';      fullBusinessName.value =  globalCreationState.companyName;    }    window.addEventListener('popstate', disableBackButton);  });  // Cleanup on unmount  onBeforeUnmount(() => {    window.removeEventListener('popstate', disableBackButton);  });</script><template>  <div class="cyborg-creation w-full relative">    <!-- Progress bar -->    <div class="progress-bar fixed block top-[73px] md:top-[75px] lg:top-[95px] left-0 right-0 h-[4px] md:h-[5px] w-full z-10 border-t-[2px] md:border-t-[5px] border-t-neutral-200">      <div :style="{ width: progressStatus + '%', maxWidth: progressStatus + '%' }" class="progress-bar-line z-20 bg-brand-200 h-full transition-all duration-500 absolute w-full left-0 right-0 top-[-2px] min-h-full bottom-auto md:h-[5px] md:top-[-5px]"></div>    </div>    <!-- Step Components with Event Listeners -->    <transition-group        name="fadeUp"        appear        @before-enter="scrollToTop"      >      <CreationFlowStep1          v-if="globalCreationState.creationStep === 1"          :key="globalCreationState.creationStep"          @advanceStep="advanceStep"          @previousStep="previousStep"          :selectedIndustry="selectedIndustry"          @selectIndustry="handleSelectIndustry"          :fullBusinessName="globalCreationState.companyName"          @updateProgress="updateProgress"      />      <CreationFlowStep2          v-if="globalCreationState.creationStep === 2"          :key="globalCreationState.creationStep"          @advanceStep="advanceStep"          @previousStep="previousStep"          :selectedIndustry="selectedIndustry"          :selectedLogoStyle="selectedLogoStyle"          @selected-logo-style="handleSelectedLogoStyle"          :selectedSuffix="selectedSuffix"          @selectedSuffix="handleSelectedSuffix"          :fullBusinessName="fullBusinessName"          @fullBusinessName="handleFullBusinessName"          :businessNameInitials="businessNameInitials"          @businessNameInitials="handleBusinessNameInitials"          :businessCategory="businessCategory"          @businessCategory="handleBusinessCategory"          @updateProgress="updateProgress"          :sloganOrTagline="sloganOrTagline"          @sloganOrTagline="handleSloganOrTagline"      />      <CreationFlowStep3          v-if="globalCreationState.creationStep === 3"          :key="globalCreationState.creationStep"          @advanceStep="advanceStep"          @previousStep="previousStep"          :selectedIndustry="selectedIndustry"          :selectedLogoStyle="selectedLogoStyle"          @selectedLogoStyle="handleSelectedLogoStyle"          :selectedSuffix="selectedSuffix"          @selectedSuffix="handleSelectedSuffix"          :fullBusinessName="fullBusinessName"          @fullBusinessName="handleFullBusinessName"          :businessNameInitials="businessNameInitials"          @businessNameInitials="handleBusinessNameInitials"          :businessCategory="businessCategory"          @businessCategory="handleBusinessCategory"          @updateProgress="updateProgress"          :sloganOrTagline="sloganOrTagline"          @sloganOrTagline="handleSloganOrTagline"      />      <CreationFlowStep4          v-if="globalCreationState.creationStep === 4"          :key="globalCreationState.creationStep"          @advanceStep="advanceStep"          @previousStep="previousStep"          :selectedIndustry="selectedIndustry"          :selectedLogoStyle="selectedLogoStyle"          @selectedLogoStyle="handleSelectedLogoStyle"          :selectedSuffix="selectedSuffix"          @selectedSuffix="handleSelectedSuffix"          :fullBusinessName="fullBusinessName"          @fullBusinessName="handleFullBusinessName"          :businessNameInitials="businessNameInitials"          @businessNameInitials="handleBusinessNameInitials"          :businessCategory="businessCategory"          @businessCategory="handleBusinessCategory"          @updateProgress="updateProgress"          :sloganOrTagline="sloganOrTagline"          @sloganOrTagline="handleSloganOrTagline"      />      <CreationFlowStep5          v-if="globalCreationState.creationStep === 5"          :key="globalCreationState.creationStep"          @advanceStep="advanceStep"          @previousStep="previousStep"          @updateProgress="updateProgress"          :sloganOrTagline="sloganOrTagline"          @sloganOrTagline="handleSloganOrTagline"          :preferredSymbolsOrStyles="preferredSymbolsOrStyles"          @preferredSymbolsOrStyles="handlePreferredSymbolOrStyles"          :selectedFontStyles="selectedFontStyles"          @selectedFontStyles="handleSelectedFontStyles"      />      <CreationFlowStep6          v-if="globalCreationState.creationStep === 6"          :key="globalCreationState.creationStep"          @advanceStep="advanceStep"          @previousStep="previousStep"          @updateProgress="updateProgress"          :sloganOrTagline="sloganOrTagline"          @sloganOrTagline="handleSloganOrTagline"          :preferredSymbolsOrStyles="preferredSymbolsOrStyles"          @preferredSymbolsOrStyles="handlePreferredSymbolOrStyles"          :selectedFontStyles="selectedFontStyles"          @selectedFontStyles="handleSelectedFontStyles"          :selectedColorStyles="selectedColorStyles"          @selectedColorStyles="handleSelectedColors"      />      <CreationFlowStep7          v-if="globalCreationState.creationStep === 7"          :key="globalCreationState.creationStep"          @advanceStep="advanceStep"          @previousStep="previousStep"          @updateProgress="updateProgress"          :sloganOrTagline="sloganOrTagline"          @sloganOrTagline="handleSloganOrTagline"          :preferredSymbolsOrStyles="preferredSymbolsOrStyles"          @preferredSymbolsOrStyles="handlePreferredSymbolOrStyles"          :selectedFontStyles="selectedFontStyles"          @selectedFontStyles="handleSelectedFontStyles"          :selectedColorStyles="selectedColorStyles"          @selectedColorStyles="handleSelectedColors"          :startLogoGeneration="startGenerationLogo"          @startLogoGeneration="handleStartGenerationLogo"      />    </transition-group>    <transition>      <generate-logo-loading          v-if="startGenerationLogo"          @startLogoGeneration="handleStartGenerationLogo"      />    </transition>    <transition>      <logo-builder          v-if="logoBuilderActive"          :selectedIndustry="selectedIndustry"          @selectIndustry="handleSelectIndustry"          :selectedLogoStyle="selectedLogoStyle"          @selectedLogoStyle="handleSelectedLogoStyle"          :fullBusinessName="fullBusinessName"          @fullBusinessName="handleFullBusinessName"          :businessNameInitials="businessNameInitials"          @businessNameInitials="handleBusinessNameInitials"          :selectedSuffix="selectedSuffix"          @selectedSuffx="handleSelectedSuffix"          :businessCategory="businessCategory"          @businessCategory="handleBusinessCategory"          :sloganOrTagline="sloganOrTagline"          @sloganOrTagline="handleSloganOrTagline"          :preferredSymbolsOrStyles="preferredSymbolsOrStyles"          @preferredSymbolsOrStyles="handlePreferredSymbolOrStyles"          :selectedFontStyles="selectedFontStyles"          @selectedFontStyles="handleSelectedFontStyles"          :selectedColorStyles="selectedColorStyles"          @selectedColorStyles="handleSelectedColors"          @startLogoGeneration="handleStartGenerationLogo"      >      </logo-builder>    </transition>    <!-- Buttons for Development (remove before launch) -->    <div class="w-full py-[30px] hidden items-center justify-center">      <button class="bg-black text-white p-[10px]" @click="advanceStep">Next Step</button>      <button class="bg-black text-white p-[10px]" @click="previousStep">Previous Step</button>    </div>  </div></template><style lang="scss">  .creation-step .step-content {    padding-bottom: 100px;  }</style><style scoped lang="scss">  .fadeUp-enter-active, .fadeUp-leave-active {    transition: opacity 0.5s ease, transform 0.5s ease;  }  .fadeUp-enter-from {    opacity: 0;    transform: translateY(30px); /* Start slightly below */  }  .fadeUp-enter-to {    opacity: 1;    transform: translateY(0); /* End at normal position */  }  .fadeUp-leave-from {    opacity: 1;    transform: translateY(0); /* Start at normal position */  }  .fadeUp-leave-to {    opacity: 0;    transform: translateY(-30px); /* Move slightly above */  }  .cyborg-creation {    input {      transition: .25s all;      -webkit-transition: .25s all;      &:focus, &:focus-visible, &:active {        border: 3px solid #00A5FD;        transition: .25s all;        -webkit-transition: .25s all;        outline: 3px solid #00A5FD;      }    }  }</style>